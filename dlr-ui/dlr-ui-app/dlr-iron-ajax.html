<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="dlr-iron-ajax">
    <template>
        <iron-ajax
                auto
                url="http://localhost:8080/dlr/records"
                body='{{data}}'
                method="{{request}}"
                handle-as="json"
                content-type="application/json"
                on-error="handleResponse"
                last-response="{{response}}">
        </iron-ajax>
    </template>

    <script>
        /** @polymerElement */
        class DlrIronAjax extends Polymer.Element {
            static get is() {
                return 'dlr-iron-ajax';
            }

            ready() {
                super.ready();
            }

            static get properties() {
                return {
                    date: {
                        type: String
                    },
                    task1: {
                        type: Boolean
                    },
                    task2: {
                        type: Boolean
                    },
                    task3: {
                        type: Boolean
                    },
                    task4: {
                        type: Boolean
                    },
                    task5: {
                        type: Boolean
                    },
                    request: {
                        type: String
                    },
                    data: {
                        computed: "computeData(date, task1, task2, task3, task4, task5)",
                        notify: true
                    },
                    response: {
                        notify: true
                    }
                };
            }

            computeData(date, task1, task2, task3, task4, task5) {
                return {"date": date, "task1": task1, "task2": task2, "task3": task3, "task4": task4, "task5": task5};
            }

            handleResponse(e) {
                console.log(e.detail.request.xhr.response);
            }
        }

        window.customElements.define(DlrIronAjax.is, DlrIronAjax);
    </script>
</dom-module>